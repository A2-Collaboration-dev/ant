language: cpp

compiler:
- gcc

python:
- "3.1"

sudo: false
  
addons:
  apt:
    packages:
    - libgsl0-dev
    - liblzma-dev
  
before_install:
- pip install --user codecov
- mkdir -p $HOME/opt
- cd $HOME/opt
- source <(curl -SLs https://raw.githubusercontent.com/A2-Collaboration-dev/travis-container-packets/cmake/setup.sh)
- source <(curl -SLs https://raw.githubusercontent.com/A2-Collaboration-dev/travis-container-packets/gcc/setup.sh)
- source <(curl -SLs https://raw.githubusercontent.com/A2-Collaboration-dev/travis-container-packets/cern-root/setup.sh)
- source <(curl -SLs https://raw.githubusercontent.com/A2-Collaboration-dev/travis-container-packets/APLCON/setup.sh)
- source <(curl -SLs https://raw.githubusercontent.com/A2-Collaboration-dev/travis-container-packets/gsi-pluto/setup.sh)
- source $TRAVIS_BUILD_DIR/ci/setup-doxygen.sh
- cd $TRAVIS_BUILD_DIR
- printenv

script: "./ci/build.sh"

after_success:
- ./ci/upload-doxygen.sh
- ./ci/upload-coverage.sh
